<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>AppAngular2</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <!-- manually add google map -->
  <script
    src="http://maps.googleapis.com/maps/api/js">
  </script>


  <script>
      var map;
      var myCenter=new google.maps.LatLng(30.274082,-97.738744);

      function initialize()
      {
      var mapProp = {
        center:myCenter,
        zoom:15,
        mapTypeId:google.maps.MapTypeId.ROADMAP
        };

      map = new google.maps.Map(document.getElementById("googleMap"),mapProp);

      var marker=new google.maps.Marker({
        position:myCenter,
        });

      marker.setMap(map);

      var myLatLng = {lat: 30.2834712, lng: -97.7319093};

      var marker1=new google.maps.Marker({map:map,
        position:myLatLng,
        });

      marker1.setMap(map);

      }

      google.maps.event.addDomListener(window, 'load', initialize);
  </script>

  <!-- firebase -->
  <script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>

  <script>
      var myFirebaseRef = new Firebase("https://faredevelopment.firebaseio.com/");

      var ref = new Firebase("https://faredevelopment.firebaseio.com/");
      ref.auth("sNEzamSKhjFBvbvIVDHB8rvv9iTtC9bP0NiLqQO0", function(error, result) {
        if (error) {
          console.log("Authentication Failed!", error);
        } else {
          console.log("Authenticated successfully with payload:", result.auth);
          console.log("Auth expires at:", new Date(result.expires * 1000));
        }
      });

      var root = ref.root();



      ref.once("value", function(snapshot) {
        // dump the ondemand driver coordinates to console log
        var data = snapshot.val();
        var ondemand = data.ondemand[1];
        console.log("**** " + ondemand);

        var ondemand = snapshot.child("ondemand");

          ondemand.forEach(function(messageSnapshot) {
            // Will be called with a messageSnapshot for each child under the /messages/ node
            var groupkey = messageSnapshot.key();   
            console.log("==== key =  " + groupkey);
            //var uid = messageSnapshot.child("uid").val();  
            //var text = messageSnapshot.child("text").val();  

                messageSnapshot.forEach(function(snapshot1) {
                  var key = snapshot1.key();   
                  console.log("** data ** " + groupkey + " -- " + key + " = " + snapshot1.val().l);
                });

          });

      });
  </script>


</head>
<body>
  <app-root>Loading...</app-root>
  <!--  @@@@ TEMP DISABLE MAP
    -->

  <div id="googleMap" style="width:1000px;height:600px;"></div>
</body>
</html>
